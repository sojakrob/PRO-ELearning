\documentclass[11pt,oneside,a4paper]{book}
%\documentclass[czech, 11pt, twoside, a4paper]{book}

\usepackage[czech, english]{babel}
\usepackage[T1]{fontenc}
%\usepackage[utf8]{inputenc}
\usepackage[cp1250]{inputenc}
%\usepackage{fontspec} 

%\usepackage[T1]{czech} %%%%[IL2] [T1] [OT1]

\usepackage{graphicx}
\usepackage{indentfirst}
\usepackage{enumerate}
\usepackage{listings}
\usepackage{pifont}
\usepackage{array}

\usepackage{k336_thesis_macros}

\usepackage{sojakrob_macros}

%\renewcommand{\includegraphics}[2][]{}

\lstset
{
language=CSharp,
classoffset=2,
morekeywords={ActionResult, UserTypes, AuthorizeUserType, PermissionException, UserPermissions, Form, ArgumentException, ArgumentNullException, UserPermissions, StudentPermissions, LectorPermissions, AdministratorPermissions, IUnityContainerAccessor, IUnityContainer}
}

\newcommand\TypeOfWork{Bakaláøská práce}  \typeout{Bakalarska prace}
\newcommand\StudProgram{Softwarové technologie a management, Bakaláøskı}
\newcommand\StudBranch{Softwarové inenırství}

\newcommand\WorkTitle{E-learningovı systém se zameøením na testování}
\newcommand\FirstandFamilyName{Robert Soják}
\newcommand\Supervisor{Ing. Ondøej Macek}

\usepackage[
pdftitle={\WorkTitle},
pdfauthor={\FirstandFamilyName},
bookmarks=true,
colorlinks=true,
breaklinks=true,
urlcolor=red,
citecolor=blue,
linkcolor=blue,
unicode=true,
]{hyperref}

\usepackage[square, numbers]{natbib}
%\usepackage{url}
%\DeclareUrlCommand\url{\def\UrlLeft{<}\def\UrlRight{>}\urlstyle{tt}}  %rm/sf/tt
%\renewcommand{\emph}[1]{\textsl{#1}}    % melo by byt kurziva nebo sklonene,
\let\oldUrl\url
\renewcommand\url[1]{<\texttt{\oldUrl{#1}}>}


\begin{document}
\selectlanguage{czech}

\iflanguage{czech}{
	 \typeout{************************************************}
	 \typeout{Zvoleny jazyk: cestina}
	 \typeout{Typ prace: \TypeOfWork}
	 \typeout{Studijni program: \StudProgram}
	 \typeout{Obor: \StudBranch}
	 \typeout{Jmeno: \FirstandFamilyName}
	 \typeout{Nazev prace: \WorkTitle}
	 \typeout{Vedouci prace: \Supervisor}
	 \typeout{***************************************************}
	 \newcommand\Department{Katedra poèítaèù}
	 \newcommand\Faculty{Fakulta elektrotechnická}
	 \newcommand\University{Èeské vysoké uèení technické v Praze}
	 \newcommand\labelSupervisor{Vedoucí práce}
	 \newcommand\labelStudProgram{Studijní program}
	 \newcommand\labelStudBranch{Obor}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%    Titulni stranka / Title page 

\coverpagestarts

%%%%%%%%%%%%%%%%%%%%%%%%%%%    Podekovani / Acknowledgements 

\acknowledgements
\noindent


%%%%%%%%%%%%%%%%%%%%%%%%%%%   Prohlaseni / Declaration 

\declaration{V~Praze dne }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%    Abstract 
 
\abstractpage



\vglue60mm
\noindent{\Huge \textbf{Abstrakt}}
\vskip 2.75\baselineskip

\noindent


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  Obsah / Table of Contents 

\tableofcontents

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  Seznam obrazku / List of Figures 

\listoffigures

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  Seznam tabulek / List of Tables

\listoftables

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  Seznam zdrojovych kodu / List of Source Codes

\lstlistoflistings

%**************************************************************

\mainbodystarts
% horizontalnÃ­ mezera mezi dvema odstavci
%\parskip=5pt
%11.12.2008 parskip + tolerance
\normalfont
\parskip=0.2\baselineskip plus 0.2\baselineskip minus 0.1\baselineskip


%*****************************************************************************
\chapter{Úvod}

Tento projekt e-learningového systému vznikl na základì poptávky neziskové organizace. Má slouit jako nástroj pro nauèné testování úèastníkù (dále \textit{studentù}) kurzù, které organizace poøádá.

V souèasné dobì organizace vyuívá pro testování Google Formuláøù\footnote{Názvem Google Formuláø zde znaèím formuláø textového procesoru z rodiny Google Dokumentù} s testovımi otázkami, kde student vybírá právì jednu odpovìï z nìkolika monıch. Skrze generovanou tabulku odpovìdí jednotlivıch studentù je sice koordinátor kurzu (dále \textit{lektor}) schopen vyhodnotit správnost odpovìdí, ale to je vše, co mu aplikace Formuláøù umoòuje. Vısledky je nucen ruènì vyhodnotit a danému studentovi nastínit správné odpovìdi nebo alespoò odkázat na související kapitolu v uèebním materiálu (dále \textit{skripta}).

Pro kategorizaci studentù a pøíslušnıch lektorù je v organizaci vyuito Google Skupin.

%*****************************************************************************
\chapter{Popis problému, specifikace cíle}

% TODO Mela by zde byt sekce napr. Popis problemu?

Jak ji z vıše nastínìného popisu vyplıvá, organizace potøebuje aplikaci pro tvorbu, vyplnìní, okamité vyhodnocení a okomentování testù.

Lektor kurzu vytvoøí šablonu testu s otázkami o nìkolika monıch odpovìdích. Ke kadé otázce by mìl mít monost napsat slovní komentáø, ve kterém mùe nastínit, proè je daná odpovìï správnì nebo špatnì a pøípadnì odkázat na studijní materiál, kterı danou problematiku vysvìtluje. Kadá otázka k sobì mùe vázat otázky alternativní, které test inovují pøi vyplòování stejného testu vícekrát.

Student by mìl mít vdy pøehled o dostupnıch testech, které jsou urèené pro skupiny, do nich je zaøazen. Po konkrétním vıbìru se pro nìj test vygeneruje z dostupnıch otázek a jejich alternativ. Vdy, kdy testovanı oznaèí svou odpovìï, zobrazení se vysvìtlení správné odpovìdi a dojde k jejímu viditelnému zvıraznìní. Po vyplnìní celého testu èi pouze jeho èásti má student monost odeslat svùj vısledek nadøízenému lektorovi. Ten má ve vısledku pøehled, jak na tom jeho svìøenci se znalostmi jsou.
 

\section{Cíl projektu}

Cílem projektu je vyvinout portál pro podporu vıuky. Hlavní funkcionalitou by mìla bıt tvorba a vyplòování nauènıch testù urèenıch skupinám studentù. Systém by mìl také podporovat tvorbu a správu elektronickıch skript.

Jakoto bakaláøská práce by mìl projekt také ukázat mou schopnost samostatnì øešit danı problém. Chtìl bych pøedvést nabyté znalostí a schopnost vyuít moderní technologie pøi jeho realizaci.

\section{Vyuití}

Vıslednı systém by mìl bıt nasazen do zmínìné poptávající neziskové organizace.

Má ale i širší vyuití, protoe dává za vznik univerzálnímu e-learningovému portálu. Systém nauènıch testù je zde svım zpùsobem originální a odlišuje portál od ostatních aplikací tohoto typu.

Já osobnì bych chtìl portál vyuít jako nástroj pro podporu vıuky studentù informatiky na gymnáziu, kde pùsobím jako uèitel. Oèekávám od nìj efektivní pomoc pøi tvorbì a známkování testù a sdílení studijních materiálù.

Mùe bıt pøínosem i pro další pøedmìty jako jednoduše ovladatelnı nástroj pro tvorbu tištìnıch testù èi dotazníkù, které jsou povìtšinou tìkopádnì tvoøeny v textovém procesoru. Nastavil by se tím i jednotnı vzhled, kterı bıvá test od testu odlišnı.

%*****************************************************************************
\chapter{Analıza}

\section{Poadavky na systém}

Poadavky na vıslednı e-learningovı systém sestávají ze základních poadavkù zadávající organizace a rozšiøujících poadavkù, které byly sestaveny na základì obecnıch poadavkù na systém takového typu a inspirací zmínìnıch v rešerši v následující sekci~\ref{sec:Rešerše existujících øešení}. Díky tìmto rozšiøujícím poadavkùm by mìl vzniknout zmínìnı komplexnìjší univerzální e-learningovı systém.

\subsection{Poadavky zadavatele}

\subsubsection{Funkèní poadavky}

\begin{enumerate}[FP1.] \setlength\itemindent{15pt}
\item Zobrazení komentáøe k~právì zodpovìzené otázce (cca odstavcovı)
\label{FP:Zobrazení komentáøe k právì zodpovìzené otázce (cca odstavcovı)}
\item Zobrazení vısledku testu a~monost jeho odeslání lektorovi kurzu
\item Kadá otázka mùe sestávat z nìkolika variací
\label{FP:Kadá otázka mùe sestávat z nìkolika variací}
\item Náhodnı vıbìr variace otázky pøi generování testu
\item Neomezenı poèet moností danı test opakovat dokud nebude zodpovìzen správnì
\item Monost kategorizace studentù a pøíslušnıch lektorù
\newcounter{FPEnum} \setcounter{FPEnum}{\theenumi}
\end{enumerate}

\subsubsection{Nefunkèní poadavky}

\begin{enumerate}[NP1.] \setlength\itemindent{15pt}
\item Jednoduché ovládání, pochopitelné pro bìného uivatele i bez zaškolení
\label{NP:Jednoduché ovládání, pochopitelné pro bìného uivatele i bez zaškolení}
\newcounter{NPEnum} \setcounter{NPEnum}{\theenumi}
\end{enumerate}

\subsection{Rozšiøující poadavky}

\subsubsection{Funkèní poadavky}

\begin{enumerate}[FP1.] \setlength\itemindent{15pt}
\setcounter{enumi}{\theFPEnum}
\item Rozšíøení o více typù testù (obecnì \textit{formuláøù})
\item Monost vıbìru z více typù otázek
\item Lektor mùe ohodnotit pøijatı formuláø
\item Podpora exportu vısledkù formuláøù do Google Formuláøù
\item Podpora tisku prázdnıch i vyplnìnıch testù
\item Monost tvorby elektronickıch skript
\end{enumerate}

\subsubsection{Nefunkèní poadavky}

\begin{enumerate}[NP1.] \setlength\itemindent{15pt}
\setcounter{enumi}{\theNPEnum}
\item Vıslednı systém je webová aplikace
\end{enumerate}


\section{Rešerše existujících øešení}
\label{sec:Rešerše existujících øešení}

Rešerši existujících øešení e-learningovıch a tvorbou formuláøù zabıvajících se aplikací jsem neprovádìl za úèelem nalezení kandidáta na rozšíøení o poadovanou funkcionalitu. Rešerši zde uvádím s cílem prozkoumat dostupná øešení, zjistit co poskytují za sluby a tøeba je vyuít pro inspiraci. Projekt byl ji od zaèátku zamıšlen pro vznik od zaèátku, takøíkajíc na zelené louce. Jedním z dùvodù je funkcionalita speciálního nauèného testu. Dalším dùvodem je poadavek na jednoduché ovládaní a zkušenost uivatelù ze zadávající spoleènosti s prostøedím Google Formuláøù. Hlavním dùvodem je ale myslím moje snaha zapojit do vıvoje znalosti softwarového inenırství a touha vytvoøit si systém vlastní. Nechtìl jsem jen vybrat z pøedpøipraveného øešení s hotovou architekturou a pøibalit k ní plugin pro práci s nauènımi testy.

\subsection{Google Formuláøe}

Jako Google Formuláø v této bakaláøské práci oznaèuji formuláø textového procesoru z balíku Google Dokumenty\cite{GoogleDocuments}. Pomocí poskytovaného nástroje je uivateli umonìno vytvoøit vlastní formuláø z nìkolika monıch formuláøovıch prvkù. Hotovı formuláø lze  poté zveøejnit (zcela nebo jen pro urèitı okruh uivatelù) a nechat uivateli vyplnit. Odpovìdi jsou automaticky zapisovány do tabulky, kde jsou spolu s dalšími informacemi (napø. datum a èas vyplnìní) pøipravené pro další analızu.

Základní myšlenka tohoto projektu vychází právì z Google Formuláøù, proto zde jejich rozebrání vìnuji více prostoru.

\begin{figure}[h]
\begin{center}
\includegraphics[width=0.9\textwidth]{figures/GoogleDocs}
\caption{Hlavní stránka Google Dokumentù}
\label{fig:Hlavní stránka Google Dokumentù}
\end{center}
\end{figure}

\begin{figure}[h]
\begin{center}
\includegraphics[width=1\textwidth]{figures/GoogleFormsSampleForm}
\caption{Ukázka Google Formuláøe: tvorba vlevo, vısledek vpravo}
\label{fig:Ukázka Google Formuláøe}
\end{center}
\end{figure}

\subsubsection{Tvorba formuláøe}

Tvorba formuláøe (viditelná na obr. \ref{fig:Ukázka Google Formuláøe}) probíhá v, øekl bych, náhledovém reimu -- uivatel vidí formuláø témìø stejnì jako koncovı uivatel, akorát nemùe vyplòovat odpovìdi a otázky mùe jednotlivì upravovat. Úpravy se provádìjí dynamicky pomocí Javascriptu a vše je automaticky ukládáno.

Otázka se skládá z nadpisu, textu nápovìdy, volby typu otázky a zda je otázku povinné vyplnit. Nepovinnı údaj je text nápovìdy a dokonce i nadpis otázky, take pøi nevyplnìní vidí koncovı uivatel jen prázdné pole èi odpovìdi pro vıbìr (v závislosti na typu otázky).

\subsubsection{Typy otázek}

Následuje vıèet otázek, které lze na Google Formuláø umístit, a pouitelnost daného typu ve vyvíjeném systému.

%TODO dopsat pouzitelnost:
\begin{description}
\item[Text] Krátkı text, tázanı uivatel zapisuje text do krátkého pole \textit{input}, které u dále nemìní svou velikost.
\item[Text odstavce] Pro tázaného zobrazen jako \textit{textarea}, která se pøizpùsobuje délce zapisovaného textu.
\item[Více moností] Jednoduchı vıèet pomocí radio buttonù pro vıbìr jedné odpovìdi.
\item[Zaškrtávací políèka] Vıèet pomocí checkboxù, monost vybrat ádnou a více odpovìdí.
\item[Vyberte ze seznamu] Zobrazí uivateli combo box s vıètem moností. Vlastnì stejná funkènost jako Více moností, ale zabírá ménì místa, jednotlivé odpovìdi nejsou stále vidìt.
\item[Mìøítko] Umoòuje zvolení hodnoty ze zvoleného rozsahu, napøíklad 1--5. Tázanému je vıbìr umonìn pomocí radio buttonù.
\item[Møíka] V podobì tabulky dává monost zvolit pro kadı øádek jednu hodnotu umístìnou ve sloupcích. Je zde ale omezení, sloupcù mùe bıt max. 5 a nelze pro jeden øádek umonit zvolení více hodnot najednou.
\end{description}

\subsubsection{Uivatelské rozhraní}

Protoe uivatelé zadavatele jsou ji zvyklí na rozhraní Google Dokumentù (na obr. \ref{fig:Hlavní stránka Google Dokumentù} a \ref{fig:Ukázka Google Formuláøe}) a toto rozhraní zároveò splòuje NP\ref{NP:Jednoduché ovládání, pochopitelné pro bìného uivatele i bez zaškolení}, mìlo by bıt grafické rozhraní e-learningového portálu podobné. Alespoò co se tıèe rozloení a umístìní ovládacích prvkù.

\subsection{Moodle}

Moodle \cite{MoodleORG} je asi nejznámìjší a celosvìtovì rozšíøené prostøedí pro elektronickou podporu vıuky. Je to vlastnì soubor mnoha modulù, které lze vyuít pro sestavení a nasazení vlastního vıukového portálu. K dispozici je jako open source pod GNU GPL licencí.

Jeho moduly umí snad vše, co se od takového systému oèekává -- od distribuce studijních materiálù pøes tvorbu a vyhodnocování testù po diskuzní fóra. Jakékoli další moduly lze samozøejmì doprogramovat.

Z pohledu uivatele se mi zdá Moodle hodnì sloitı. Kadá obrazovka chrlí velké mnoství rùznıch nabídek, dat a moností. Nezkušenı uivatel musí bıt doslova zavalen, nemluvì o vyuèujících, kteøí mají k dispozici podstatnì více všemonıch akcí a nastavení. Mnoství z nich je pøístupné jen formou malıch ikonek u jednotlivıch poloek. Zaèínající uivatel role studenta má ještì monost po chvíli nalézt co hledá, ale lektor to má mnohem tìší. Bìní uivatelé, kteøí mají problém pouívat akce textového procesoru, musí bıt v systému bez externí pomoci zcela ztraceni. Tomu se právì snaím v mém systému vyhnout.

\subsubsection{Otázky do testù}

V systému Moodle jsou otázky pojaty trochu jinım zpùsobem, ne mùeme oèekávat u pøímoèarého tvùrce formuláøù (jako je napø. vıše popisovanı Google Formuláø). Nejsou toti vázány na jednotlivé testy, ale existují v tzv. otázkovıch bankách k urèitému kurzu. Dále se dají øadit do kategorií a také sdílet s dalšími kurzy a vyuèujícími.

Ve vyvíjeném e-learningovém systému se mi ale takovı zpùsob nezdá bıt pøínosem. Myslím si, e pro uivatele by bylo zbyteènì sloité øadit otázky do mnoství skupin a posléze kadému formuláøi skupiny otázek nastavovat.

Systém obsahuje velké mnoství typù otázek, které vlastnì rozšiøují základní bìnì pouívanou mnoinu o specifiètìjší (jako napø. spojování). Vıèet pøikládám v pøíloze \ref{fig:Typy otázek v systému Moodle}.

\subsection{Studentova berlièka}



\subsection{Edubase}
\subsection{Závìr}

\section{Uivatelské role}

Uivatelské role potøebné v systému jasnì plynou ji ze zadání, jsou to tyto tøi role:

\begin{description}
\item[Student] Pøedstavuje úèastníka kurzu z domény zadavatele a obecnì studenta vyuívajícího e-learningového systému. Z hlediska práv je na nejniší úrovni, tzn. všechny jeho akce se vztahují pouze k nìmu samotnému. Mezi akce patøí napøíklad vyplòování testù dostupné pro jeho skupinu a prohlíení vısledkù svıch testù (více viz. sekce \ref{sec:Pøípady uití}).
\item[Lektor] Lektorem je koordinátor kurzu z domény zadavatele, vedoucí jedné èi více skupin (neboli kurzù). Obecnì se tedy jedná o uèitele studentù, kterı má na starost tvorbu testù pro jeho skupiny a jejich následné ohodnocení.
\item[Administrátor] Uivatelská role známá asi ze všech systémù. Je to správce celého portálu a jako takovı má práva všech lektorù a k tomu dostupnou funkcionalitu pro administraci aplikace vèetnì pøidávání uivatelù a tvorby skupin.
\end{description}

\section{Pøípady uití}
\label{sec:Pøípady uití}

Na diagramu \ref{fig:Diagram uití} jsou zachyceny základní operace provádìné uivateli v danıch rolích zastoupenıch aktéry pøípadù uití.

\begin{figure}[h]
\begin{center}
\includegraphics[width=0.9\textwidth]{figures/UseCaseDiagram}
\caption{Diagram uití}
\label{fig:Diagram uití}
\end{center}
\end{figure}

\section{Formuláøe}

Formuláøe pøedstavují základní nástroj tohoto e-learningového portálu. Slouí jak lektorùm pro otestování znalostí jejich ákù, tak pro studenty samotné jako nástroj pro nauku a zpìtnou vazbu.

Kadı formuláø je moné pøiøadit do libovolného mnoství skupin. Vede-li lektor více skupin, má tím tedy monost urèit jako cílové skupiny formuláøe jen podmnoinu. Studenti potom mají pøístup ke všem formuláøùm z jim pøiøazenıch skupin.

Mezi další monosti, které formuláøe obsahují, patøí napøíklad nastavení èasového limitu pro jeho vyplnìní èi zamíchání jednotlivıch otázek a odpovìdí. Více je popsáno v sekci \ref{sec:Monosti nastavení formuláøù}.

ivotní cyklus formuláøe (viz. Obr. \ref{fig:Stavovı diagram formuláøe}) zaèíná jeho zaloením lektorem. V tuto chvíli jsou nastaveny monosti formuláøe a vytváøeny otázky. Aby byl viditelnı pro studenty z pøiøazenıch skupin, musí pøejít do stavu \textit{Aktivní}. Pro opìtovné pozastavení formuláøe je moné pøejít zpìt do \textit{Neaktivního} stavu, kde u ale není povolena editace. Nakonec formuláø pøechází do stavu \textit{Archivován}.

\begin{figure}[h]
\begin{center}
\includegraphics[width=0.5\textwidth]{figures/FormStateDiagram}
\caption{Stavovı diagram formuláøe}
\label{fig:Stavovı diagram formuláøe}
\end{center}
\end{figure}

\subsection{Typy formuláøù}

Základní mnoinu formuláøù systému tvoøí tyto tøi typy:

\begin{description}
\item[Nauènı test] Je to netradièní typ testu vycházející z poadavkù zadavatele. Ke kadé otázce je moné pøidat vysvìtlení správné odpovìdi (FP\ref{FP:Zobrazení komentáøe k právì zodpovìzené otázce (cca odstavcovı)}), které je vyplòujícímu studentovi zobrazeno po oznaèení odpovìdi, kterou povauje za správnou. Test tedy plní dvì funkce, vypovídá o souèasnıch znalostech studenta a  pøipravenost na monı zkouškovı test, a zároveò ho opravuje a smìruje správnou cestou. Test je moné vyplnit libovolnìkrát. Díky alternativním otázkám (FP\ref{FP:Kadá otázka mùe sestávat z nìkolika variací}) není pokadé stejnı.
\item[Zkouškovı test] Toto je bìnı test pro ostré otestování studentovıch znalostí, jak ho známe ze všech vzdìlávacích institucí. Mùe mít navíc urèen napøíklad èasovı limit pro dokonèení èí monost více pokusù pro správné vyplnìní.
\item[Dotazník] Plní funkci bìného dotazníku. Kadı ho smí vyplnit pouze jedenkrát.
\end{description}

\subsection{Monosti nastavení formuláøù}
\label{sec:Monosti nastavení formuláøù}

Monosti nastavení chování jednotlivıch typù formuláøù shrnuje následující tabulka \ref{tab:Monosti chování formuláøù}.

\begin{table}[h]
\begin{center}
\begin{tabular}{!{\bvline}l!{\bvline}c|c|c!{\bvline}} \bhline
 & \textbf{Nauènı test} & \textbf{Zkušební test} & \textbf{Dotazník} \\ \bhline
Èas na vyplnìní & \tick & \tick & \cross \\ \hline
Zamíchaní otázek & \tick & \tick & \cross \\ \hline
Zamíchaní nabízenıch odpovìdí & \tick & \tick & \cross \\ \hline
Vysvìtlení správné odpovìdi & \tick & \cross & \cross \\ \hline
Monost vyplnit libovolnìkrát & \tick & \tick & \cross \\ \bhline
\end{tabular}
\end{center}
\caption{Monosti chování formuláøù}
\label{tab:Monosti chování formuláøù}
\end{table}

\section{Otázky}

Otázky tvoøí náplò formuláøù. Kadá z otázek mùe k sobì do skupiny vázat další, alternativní otázky. Kdy je pro studenta generován test, právì jedna otázka je z této skupiny vybrána. Jestlie tedy test obsahuje otázky i s jejich alternativami, budou jednotlivé vygenerované testy rozdílné nejen z hlediska vzhledu (z dùvodu moného promíchání otázek), ale také z hlediska obsahu.

Jednotlivé otázky formuláøe mohou bıt lektorem libovolnì tvoøeny, duplikovány, upravovány a mazány. Ovšem jen do okamiku, kdy je formuláø pøeveden do stavu \textit{aktivní} a vyplnìn nìkterım ze studentù. V tom pøípadì u otázky nesmìjí bıt upravovány a mazány, aby mìli všichni stejné podmínky a nemìnily se jim otázky \uv{pod rukama}.

Monost duplikace otázek je zavedena hlavnì kvùli vıbìrovım otázkám \ref{item:Vıbìrová otázka}, aby byly zadané monosti jednoduše pouitelné i pro další otázku.

\subsection{Typy otázek}

Mnoina typù jednotlivıch otázek je sestavena z potøeby zadavatele, èím je otázka vıbìrová, a základních potøeb univerzálního e-learningového systému. Mnoina tedy obsahuje 5 typù otázek, z èeho 3 typy jsou základní. Moné další  otázky vhodné pro rozšíøení systému jsou nastínìny v sekci \ref{sec:Moná rozšíøení sub:Otázky}.

\begin{description}

\item[Vıbìrová otázka] \label{item:Vıbìrová otázka} \hfill
\begin{description}
\item[Jedna správná odpovìï] Právì jedna z mnoiny nabízenıch odpovìdích je správná.
\item[Více správnıch odpovìdí] ádná nebo více z nabízenıch odpovìdí je správná.
\end{description}

\item[Textová otázka] \hfill
\begin{description}
\item[Krátká] Od vyplòujícího studenta se oèekává jednoslovná èi jednovìtná odpovìï.
\item[Dlouhá] Zde se oèekává vyèerpávající odpovìï, tzn. jedna a více vìt.
\end{description}

\item[Rozsahová otázka] Odpovìï je tøeba vybrat z definovaného rozsahu, napø. známka 1--5, hodnocení 0--10. Tento typ otázky je hlavnì pro potøebu dotazníku.


\end{description}


\chapter{Návrh}

\section{Architektura systému}

\begin{figure}[h]
\begin{center}
\includegraphics[width=0.8\textwidth]{figures/Architecture_full}
\caption{Architektura systému}
\label{fig:Architektura systému}
\end{center}
\end{figure}

\section{Datová vrstva}

%TODO Meta model presunout do analyzy?
\begin{figure}[h]
\begin{center}
\includegraphics[width=0.9\textwidth]{figures/MetaModel}
\caption{Meta model}
\label{fig:Meta model}
\end{center}
\end{figure}

\begin{figure}[h]
\begin{center}
\includegraphics[width=1\textwidth]{figures/DesignModel}
\caption{Návrhovı model datové vrstvy}
\label{fig:Design model datové vrstvy}
\end{center}
\end{figure}

\section{Business vrstva}

\section{Prezentaèní vrstva}

%*****************************************************************************
\chapter{Implementace}

\section{Datová vrstva}

Pro implementaci datové vrstvy aplikace jsem pouil Entity Framework (viz. \ref{sec:Entity Framework}). Zvolil jsem pøístup Model First Development. Podle mì je to vıbornı kompromis mezi Code First a Database First øízeném vıvoji. Mám díky nìmu plnou kontrolu nad strukturou vytváøené databáze a zároveò nad generovanımi tøídami.

Všechny moné nedostatky skriptu databáze lze vyøešit pøidáním databázového projektu a importem vygenerovaného skriptu do nìj. V takovém projektu lze mít další skripty napøíklad pro spuštìní pøed a po vyvolání hlavního skriptu. Post-deployment skriptu vyuívám také pro automatické vytvoøení základních záznamù (èíselníky, administrátor), èím mì kadé nasazení databáze stojí pouhé dvì kliknutí myší.

Úpravy generovaného kódu tøíd lze jednoduše provést pomocí èásteènıch tøíd. Napøíklad u entit obsahujících hodnotu èíselníku toho vyuívám pro navázání enumerátoru v kódu, pøedstavujícího danı databázovı èíselník. Nikde jinde v kódu pak tedy nemusím øešit ádné èíselníkové objekty a identifikátory vztahující se k databázi.

Ve své implementaci datové vrstvy nevyuívám monosti nastavit kaskádní mazání poloek v databázi, všechna taková mazání je tedy nutné provádìt \uv{ruènì} v business vrstvì. Je to hlavnì z dùvodu zamezení vzniku všelijakıch chyb z nepozornosti a neprostudování všech monıch relací. Je tedy nutné mít v metodách pro mazání pár øádkù kódu navíc, ale tím jsou všechny vykonávané akce patrné a pøípadnì lze nìjaké další akce pøi mazání vyvolat.

\begin{figure}[h]
\begin{center}
\includegraphics[width=1\textwidth]{figures/EntityDataModel}
\caption{Entity Data Model}
\label{fig:Entity Data Model}
\end{center}
\end{figure}

\clearpage
\section{Práva uivatelù}

Práva uivatelù se v tomto systému odvíjí od role, ve které se danı uivatel nachází. Není zde potøeba nastavovat kadému uivateli specifická práva, protoe role pøesnì definují jeho vztah k informacím v systému a operacím s nimi. To je rozdíl napøíklad od vnitrofiremních IS, kde je potøeba kadému uivateli mìnit práva pro pøístup k datùm a jednotlivım modulùm.

Pøesto jsou ale práva implementována tak, aby v pøípadì budoucí potøeby (a zde také pro ukázkové akademické úèely) bylo velmi jednoduché pøiøadit kadému uivateli práva nezávisle na jeho systémové roli. Abych dále mohl uvést podrobnìjší detaily, uvádím zde ukázku implementace oprávnìní uivatele:

\begin{lstlisting}[caption={\icode{UserPermissions} a související tøídy}]
namespace ELearning.Business.Permissions
{
	public class U``serPermissions
	{
		// ...
		public virtual bool Group_List_All { get { return false; } }
		public virtual bool Group_CreateEdit { get { return false; } }
		public virtual bool Group_Delete { get { return false; } }
		// ...
		internal static UserPermissions Get(UserTypes userType)
		{
			switch (userType)
			{
				// ...
				case UserTypes.Administrator:
					return new AdministratorPermissions();
				// ...
			}
		}
	}
	public class S``tudentPermissions : UserPermissions { /* ... */ }
	public class L``ectorPermissions : StudentPermissions { /* ... */ }
	public class A``dministratorPermissions : LectorPermissions
	{
		// ...
		public override bool Group_List_All { get { return true; } }
		public override bool Group_CreateEdit { get { return true; } }
		public override bool Group_Delete { get { return true; } }
		// ...
	}
\end{lstlisting}

Jak je z kódu patrné, všechny dílèí práva (v ukázce práva na operace s uivatelskımi skupinami) jsou umístìna do vlastní property. Vrácení správné hodnoty v závislosti na roli uivatele je øešené pomocí dìdiènosti. Pro úpravu práv, aby fungovala pro jednotlivé uivatele nezávisle na rolích, je potøeba jen pøidat vlastní tøídu pro vrácení hodnoty získané ne \uv{natvrdo}, ale z relevantního záznamu z databáze.


\section{Bezpeènost}

Na bezpeènost této webové aplikace se dívám ze dvou smìrù, a to z hlediska bezpeènosti pøenášenıch dat mezi klientem a serverem a z hlediska bezpeènosti pøi práci uivatele v aplikaci. Jsou zde moná i další hlediska, napøíklad komunikace webového serveru s databázovım serverem, ale tu zde myslím není tøeba rozebírat. Pro jednoduchost pøedpokládám, e aplikace i databáze bìí na totoném serveru.

\subsection{Bezpeènost pøenášenıch dat}

Jedná se o bezpeènost pøenosu veškerıch dat, která se pøenášejí po síti (a u po LAN èi po internetu), kdy uivatel interaguje s aplikací. Nejdùleitìjší je asi moment, kdy se uivatel do aplikace pøihlašuje. Odesílá své uivatelské jméno a heslo, díky èemu je systémem identifikován a autorizován k provádìní jednotlivıch akcí.

Kdy pøihlašovací údaje zachytí útoèník (útokem známım jako MITM\footnote{Man In The Middle -- útoèník, kterı odposlouchává a pøípadnì mìní komunikaci}), získává tím identitu pravého uivatele a pøístup ke všem jeho datùm v systému. To dìlá tento útok nejnebezpeènìjším ze všech. Kdy se navíc útoèníkovi podaøí získat pøihlašovací údaje administrátora systému, dostane se rázem k veškerım datùm v systému. Navíc pro export do Google Formuláøù musí uivatel zadat údaje ke svému Google úètu, take v pøípadì odposlechnutí dojde k narušení bezpeènosti i ve zcela jiném systému ne je tento.

I kdy se ale útoèníkovi nepodaøí zachytit pøihlašovací údaje, stále má monost se hodnì vìcí dozvìdìt. Pøi zachycení komunikace vidí všechny informace, které si uivatel v danou chvíli prohlíí èi zadává.

Naštìstí se dá útokùm lehce zabránit, a to zavedením komunikace pøes HTTPS namísto HTTP, co se øeší na úrovni webového serveru. Pøi komunikaci pøes HTTPS je vyuito protokolu SSL, kterı s vyuitím serverového certifikátu veškerou komunikaci šifruje.

\subsection{Bezpeènost pøi práci v aplikaci}

Zde se jedná o bezpeènost interakce uivatele s rozhraním aplikace, tzn. zobrazování informací, pøidávání a úprava dat, to vše podmínìné stupnìm oprávnìní uivatele a jeho pøiøazení do skupin.

V aplikaci je implementováno \uv{dvoustupòové} zabezpeèení. Prvním stupnìm je kontrola oprávnìní uivatele na úrovni prezentaèní vrstvy. Pøístup na jednotlivé stránky je regulován pomocí zavedeného atributu \icode{AuthorizeUserType}, kterı jsem pøipojil ke všem metodám controllerù. Pøedáním parametru \icode{UserType} je urèen nejniší stupeò oprávnìní pro pøístup na danou url zastupovanou názvem metody. Pøi neoprávnìném pokusu o pøístup na url je atributem vyhozena vıjimka typu \icode{PermissionException}. Bìnì by se uivatel na takovouto url vùbec dostat nemìl, protoe stejná politika je implementována ve views, èím adresa takové url není uivateli dostupná.

\begin{lstlisting}[caption={Pouití atributu \icode{AuthorizeUserType}}]
[AuthorizeUserType(UserType = UserTypes.Lector)]
public ActionResult Create()
{
	// ...
}
\end{lstlisting}

% TODO Pridat screenshot pri Permission Exception (po doladeni GUI)

Druhım stupnìm je kontrola oprávnìní v samotné business vrstvì. Všechny operace nad daty zde obsahují ovìøují práva na vykonání pomocí \icode{UserPermissions}, testují jestli poadovanou poloku uivatel vytvoøil èi patøí do jeho skupiny atd. Pokud práva nemá, vznikne opìt vıjimka \icode{PermissionException}.

\begin{lstlisting}[caption={Ovìøování v business vrstvì}]
public Form GetForm(int id)
{
	var result = GetSingle(f => f.ID == id);
	if (result == null)
	{
		if (Context.F``orm.Count(f => f.ID == id) > 0)
			throw new PermissionException("Form_Get");
		else
			throw new ArgumentException("Form not found");
 	}

	return result;
}
\end{lstlisting}

%*****************************************************************************
\chapter{Testování}


\section{Unit testy}

Ovìøení funkènosti hlavních tøíd a jejich metod je provedeno pomocí Unit testù.

\section{Selenium testy}
\section{Vıkonové testy}
\subsection{Databáze}
%TODO Zminit se ze by bylo treba provest profiling pristupu do DB kvuli vyladeni volani a nastaveni EF
\section{Otestování v praxi}

%*****************************************************************************
\chapter{Nasazení}

Nasazení aplikace je patrné z obrázku \ref{fig:Diagram nasazení}. Uivatel potøebuje internetovı prohlíeè se zapnutou podporou Javascriptu. Jeho pomocí se pøipojuje k serveru, na kterém je nasazena aplikace.

Pro správnı bìh aplikace musí bıt na serveru nainstalován .NET Framework verze alespoò 4.0. Jako datové uloištì aplikace poaduje databázovı server Microsoft SQL Server verze alespoò 2005. Databázovı server mùe bıt nasazen i na vzdáleném serveru.

\begin{figure}[h]
\begin{center}
\includegraphics[width=1\textwidth]{figures/DeploymentDiagram}
\caption{Diagram nasazení}
\label{fig:Diagram nasazení}
\end{center}
\end{figure}

%*****************************************************************************
\chapter{Pouité technologie a frameworky}

\section{Entity Framework}
\label{sec:Entity Framework}

\section{Unity Application Block}

Pro dependecy injection vyuívám NuGet balíèku Unity Application Block. Zde bych chtìl pøiblíit, jak jej zaèlenit do projektu.

Nejdøíve je nutné do projektu nainstalovat Unity NuGet balíèek (v menu Visual Studia zvolit Tools > Library Package Manager > Manage NuGet Packages..., v dialogovém oknì vyhledat Unity a potvrdit instalaci).



Pro pøístup k Unity definuji podobnì jako v \cite{HowToUseUnityContainer} interface \icode{IUnityContainerAccessor} s následujícím pøedpisem:

\begin{lstlisting}[caption={Pøedpis rozhraní \icode{IUnityContainerAccessor}}]
public interface IUnityContainerAccessor
{
	IUnityContainer UnityContainer { get; }
}
\end{lstlisting}



\section{Porovnání ASP.NET MVC a ASP.NET Web Forms}
%*****************************************************************************
\chapter{Závìr}

\section{Moná rozšíøení}

\subsection{Otázky}
\label{sec:Moná rozšíøení sub:Otázky}
Monost pøiøadit k textu otázky obrázek.

%*****************************************************************************

\bibliographystyle{csplainnat}

%bibliographystyle{plain}
%\bibliographystyle{psc}

% TODO Jak udelat sekci Odkazy? Nebo bezne odkazy na url patri take sem?
\bibliography{reference}


%*****************************************************************************
%*****************************************************************************
\appendix

%*****************************************************************************

% JZ: 3.5.2009 \chapter z book zajistÃ­ automaticky
%\subsection{ZaÄÃ¡tky kapitol na lichÃ© strÃ¡nky}
%Ve vÃ½slednÃ©m textu je dobrÃ©, kdyÅ¾ kaÅ¾dÃ¡ kapitola zaÄÃ­nÃ¡ na lichÃ© strÃ¡nce. Tedy pouÅ¾ijte:
%\begin{verbatim}
%  \cleardoublepage\include{1_uvod}
%  \cleardoublepage\include{2_teorie}
%   atd.\ldots{}
%\end{verbatim}

%*****************************************************************************
\chapter{Seznam pouitıch pojmù}

\begin{description}
\item[E-learning] \hfill \\
Vzdìlávání za pomoci moderních elektronickıch informaèních a komunikaèních technologií
\end{description}
\vdots

%*****************************************************************************
\chapter{Seznam pouitıch zkratek}

\begin{description}
\item[LAN] Local Area Network
\item[MITM] Man In The Middle
\item[HTTP] HyperText Transfer Protocol
\item[HTTPS] HyperText Transfer Protocol Secure
\item[IS] Informaèní Systém
\item{GPL} General Public License
\end{description}
\vdots

%*****************************************************************************

\chapter{UML diagramy}

%*****************************************************************************
\chapter{InstalaÄnÃ­ a uÅ¾ivatelskÃ¡ pÅ™Ã­ruÄka}

%*****************************************************************************
\chapter{Obsah pÅ™iloÅ¾enÃ©ho CD}

%*****************************************************************************
\chapter{Obrazová pøíloha}

\begin{figure}[h]
\begin{center}
\includegraphics[width=1\textwidth]{figures/MoodleQuestionTypes}
\caption{Typy otázek v systému Moodle}
\label{fig:Typy otázek v systému Moodle}
\end{center}
\end{figure}



\end{document}
